(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["mobile-org"]=t():e["mobile-org"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"1cfd":function(e,t,n){},"65ce":function(e,t,n){"use strict";n("1cfd")},"6eb1":function(e,t,n){},8875:function(e,t,n){var s,r,i;(function(n,c){r=[],s=c,i="function"===typeof s?s.apply(t,r):s,void 0===i||(e.exports=i)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var n,s,r,i=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,c=/@([^@]*):(\d+):(\d+)\s*$/gi,a=i.exec(p.stack)||c.exec(p.stack),o=a&&a[1]||!1,l=a&&a[2]||!1,d=document.location.href.replace(document.location.hash,""),u=document.getElementsByTagName("script");o===d&&(n=document.documentElement.outerHTML,s=new RegExp("(?:[^\\n]+?\\n){0,"+(l-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),r=n.replace(s,"$1").trim());for(var h=0;h<u.length;h++){if("interactive"===u[h].readyState)return u[h];if(u[h].src===o)return u[h];if(o===d&&u[h].innerHTML&&u[h].innerHTML.trim()===r)return u[h]}return null}}return e}))},9816:function(e,t,n){"use strict";n("6eb1")},fb15:function(e,t,n){"use strict";if(n.r(t),"undefined"!==typeof window){var s=window.document.currentScript,r=n("8875");s=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r});var i=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(n.p=i[1])}var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mobile-org",on:{touchstart:e.gtouchstart,touchend:e.gtouchend}},[n("div",{staticClass:"search"},[n("form",{staticClass:"search-form",attrs:{action:"javascript:return true"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKey,expression:"searchKey"}],attrs:{type:"search",placeholder:e.searchPlaceholder},domProps:{value:e.searchKey},on:{input:[function(t){t.target.composing||(e.searchKey=t.target.value)},e.handleSearch],compositionstart:e.handleComposionstart,compositionend:e.handleComposionend}}),e.isShowClearBtn&&e.searchKey?n("span",{staticClass:"clear-search-key-btn",on:{click:e.clearSearchKey}},[e._v("×")]):e._e()])]),n("div",{staticClass:"org-content"},[n("div",{staticClass:"org-content__current"},[n("div",{staticClass:"org-content__current__nav"},[n("span",{on:{click:function(t){return e.handleCurrentListClick(-1)}}},[e._v("全部")]),e._l(e.currentData,(function(t,s){return n("span",{key:s,on:{click:function(t){return e.handleCurrentListClick(s)}}},[e._v(" "+e._s(t[e.label])+" ")])}))],2),e._t("switch-show-type-btn",(function(){return[n("div",{staticClass:"org-content__current__switchBtn"},[n("button",{staticClass:"btn",on:{click:e.switchShowType}},[e._v(" "+e._s("org"==e.showType?e.orgText:e.roleText)+" ")])])]}),{showType:e.showType})],2),n("div",{staticClass:"org-content__warp"},[n("ul",{staticClass:"org-content__ul"},[e.renderData.length>0?[e._t("content-area",(function(){return e._l(e.renderData,(function(t){return n("li",{key:t[e.nodeKey],staticClass:"org-content__item"},[e.selectTypes.includes(t.type)?n("input",{staticClass:"item-checkbox",style:{"border-radius":"square"===e.checkboxStyle?"":"50%"},attrs:{type:"checkbox",name:"check"},domProps:{checked:e.isChecked(t)},on:{click:function(n){return e.handleItemClick(t)}}}):e._e(),e.isShowIcon?n("img",{staticClass:"avatar",style:{visibility:t[e.icon]||e.defaultIcon?"":"hidden"},attrs:{src:t[e.icon]||e.defaultIcon},on:{click:function(n){return e.handleItemClick(t)}}}):e._e(),n("span",{staticClass:"org-content__item-text",on:{click:function(n){return e.handleItemClick(t)}}},[e._v(" "+e._s(t[e.label])+" ")]),t.hasOwnProperty(e.children)?n("span",{staticClass:"org-content__item-child",on:{click:function(n){return e.handleItemChildClick(t)}}},[e._v(" > ")]):e._e()])}))}),{renderData:e.renderData})]:[e._t("empty-tips",(function(){return[n("li",{staticClass:"empty"},[n("small",[e._v("暂无"+e._s(e.searchKey?"与 '"+e.searchKey+"' 相关":"")+"数据")])])]}))]],2)]),n("div",{staticClass:"org-content__operation"},[e._t("selected-list",(function(){return[n("div",{staticClass:"selected-item-list"},e._l(e.selectedItems,(function(t,s){return n("span",{key:s,staticClass:"seleted-item"},[e._v(" "+e._s(t[e.label])+" "),n("i",{staticClass:"close-icon",on:{click:function(n){return e.delItem(t)}}})])})),0)]}),{selectedItems:e.selectedItems}),n("div",{staticClass:"result-display"},[e._t("result-area",(function(){return[n("div",{staticClass:"result-area__display"},[e.selectedItems.length?e._e():n("span",[e._v("暂无选择")]),e.selectedItems.length?n("span",[e._v("已选择 "+e._s(e.selectedItems.length)+" 项")]):e._e()]),n("div",{staticClass:"result-area__operation"},[n("span",{staticClass:"cancel-btn",on:{click:e.handleCancel}},[e._v(e._s(e.cancelText))]),n("span",{staticClass:"submit-btn",on:{click:e.handleSubmit}},[e._v(e._s(e.submitText))])])]}),{selectedItems:e.selectedItems})],2)],2)])])},a=[],o={name:"MobileOrg",props:{data:{type:Array,default:()=>[]},selectTypes:{type:Array,default:()=>["org","role"]},defaultIcon:{type:String,default:""},label:{type:String,default:"name"},nodeKey:{type:String,default:"id"},children:{type:String,default:"children"},icon:{type:String,default:"avatar"},isShowClearBtn:{type:Boolean,default:!0},searchPlaceholder:{type:String,default:"搜索"},submitText:{type:String,default:"提交"},cancelText:{type:String,default:"取消"},isShowIcon:{type:Boolean,default:!1},isMultiple:{type:Boolean,default:!0},isSelectRequired:{type:Boolean,default:!0},selectedList:{type:Array,default:()=>[]},slideDistance:{type:Number,default:100},defaultShowType:{type:String,default:"org"},checkboxStyle:{type:String,default:"round"},orgText:{type:String,default:"组织"},roleText:{type:String,default:"角色"}},data(){return{currentData:[],selectedItems:[],renderData:[],searchKey:"",startX:"",showType:"",isTyping:!1}},mounted(){Array.isArray(this.selectedList)&&this.selectedList.length>0&&(this.selectedItems=this.selectedList),this.renderData=this.data},methods:{gtouchstart(e){this.startX=e.targetTouches[0].clientX},gtouchend(e){e.changedTouches[0].clientX-this.startX>=this.slideDistance&&(this.handleCurrentListClick(this.currentData.length-2),this.$emit("on-slide"))},switchShowType(){switch(this.showType){case"org":this.showType="role",this.currentData=[],this.searchKey="";break;case"role":this.showType="org",this.currentData=[],this.searchKey="";default:break}this.$emit("on-switch-show-type",this.showType)},isChecked(e){return this.selectedItems.find(t=>t[this.nodeKey]==e[this.nodeKey])},handleItemClick(e){if(this.selectTypes.includes(e.type)){if(this.isMultiple){const t=JSON.parse(JSON.stringify(e));let n=this.selectedItems.find(e=>t[this.nodeKey]==e[this.nodeKey]);n?this.selectedItems=this.selectedItems.filter(e=>e[this.nodeKey]!==t[this.nodeKey]):this.selectedItems.push(t)}else this.selectedItems=[],this.selectedItems.push(e);this.$emit("on-select",e)}},handleItemChildClick(e){this.currentData.push(e),this.$emit("on-expand",e)},handleCurrentListClick(e){if(e==this.currentData.length-1||0===this.currentData.length&&-1==e)return this.searchKey="",void this.$emit("on-nav","-1");e>-1?(this.currentData=this.currentData.slice(0,e+1),this.$emit("on-nav",this.currentData[e])):(this.currentData=[],this.$emit("on-nav","-1"))},delItem(e){this.selectedItems=this.selectedItems.filter(t=>t[this.nodeKey]!==e[this.nodeKey])},handleSubmit(){!this.isSelectRequired||this.selectedItems.length?this.$emit("on-submit",this.selectedItems):alert("未做任何选择，请选择后重试。")},handleCancel(){this.$emit("on-cancel")},handleSearch(){this.isTyping||(console.log("search"),this.$emit("on-search",this.searchKey.trim()))},handleComposionstart(){this.isTyping=!0,console.log("input start")},handleComposionend(){this.isTyping=!1,console.log("input end")},clearSearchKey(){this.searchKey="",this.$emit("on-clear")}},watch:{defaultShowType:{handler(e,t){this.showType=e},deep:!0,immediate:!0},data:{handler(e){this.renderData=e},immediate:!0}}},l=o;n("65ce"),n("9816");function d(e,t,n,s,r,i,c,a){var o,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),s&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),c?(o=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(c)},l._ssrRegister=o):r&&(o=a?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),o)if(l.functional){l._injectStyles=o;var d=l.render;l.render=function(e,t){return o.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,o):[o]}return{exports:e,options:l}}var u=d(l,c,a,!1,null,"53dafb9d",null),h=u.exports;const p={install:function(e){e.component("MobileOrg",h)}};var f=p;t["default"]=f}})}));